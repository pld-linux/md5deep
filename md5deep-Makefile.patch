diff -urN md5deep-1.9.1/Makefile md5deep-1.9.1.new/Makefile
--- md5deep-1.9.1/Makefile	2005-11-08 02:03:17.000000000 +0100
+++ md5deep-1.9.1.new/Makefile	2005-11-12 00:40:17.000000000 +0100
@@ -1,10 +1,11 @@
 
 CC = gcc
-CFLAGS = -Wall -O3
+DEFINES =
+CFLAGS = -Wall -O2
 LINK_OPT = -lm
 
 # Where we get installed
-PREFIX = /usr/local
+PREFIX = /usr
 
 # You can cross compile this program for Win32 using the MinGW compiler
 # See README for details. Put the $PREFIX used to install MinGW in CR_BASE
@@ -39,7 +40,10 @@
 WINDOC = README.txt CHANGES.txt
 
 MAN_PAGE   = $(NAME).1
-CFLAGS += -D VERSION=\"$(VERSION)\"
+DEFINES += -DVERSION=\"$(VERSION)\"
+
+.c.o:
+	$(CC) $(CFLAGS) $(DEFINES) -c $<
 
 #---------------------------------------------------------------------
 # OPERATING SYSTEM DIRECTIVES
@@ -49,11 +53,11 @@
 
 goals: $(OBJ) $(ALL_GOALS)
 
-linux: CFLAGS += -D__LINUX -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
+linux: DEFINES += -D__LINUX -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
 linux: goals
 
 sunos: solaris
-solaris: CC += -D__SOLARIS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
+solaris: DEFINES += -D__SOLARIS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
 solaris: goals
 
 # There are no additional defines for OS X as _APPLE_ is defined for us.
@@ -83,61 +87,61 @@
 #---------------------------------------------------------------------
 
 files-tiger.o: files.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 hash-tiger.o: hash.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 
 TIGEROBJ = files-tiger.o hash-tiger.o tiger.o
-tigerdeep: CC += -DTIGER
+tigerdeep: DEFINES += -DTIGER
 tigerdeep: $(OBJ) $(TIGEROBJ)
-	$(CC) $(OBJ) $(TIGEROBJ) -o $@$(SUFFIX) $(LINK_OPT)
+	$(CC) $(CFLAGS) $(DEFINES) $(OBJ) $(TIGEROBJ) -o $@$(SUFFIX) $(LINK_OPT)
 
 
 
 files-whirlpool.o: files.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 hash-whirlpool.o: hash.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 
 WHIRLPOOLOBJ = files-whirlpool.o hash-whirlpool.o whirlpool.o
-whirlpooldeep: CC += -DWHIRLPOOL
+whirlpooldeep: DEFINES += -DWHIRLPOOL
 whirlpooldeep: $(OBJ) $(WHIRLPOOLOBJ)
-	$(CC) $(OBJ) $(WHIRLPOOLOBJ) -o $@$(SUFFIX) $(LINK_OPT)
+	$(CC) $(CFLAGS) $(DEFINES) $(OBJ) $(WHIRLPOOLOBJ) -o $@$(SUFFIX) $(LINK_OPT)
 
 
 
 files-md5.o: files.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 hash-md5.o: hash.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 
 MD5OBJ = files-md5.o hash-md5.o md5.o
-md5deep: CC += -DMD5
+md5deep: DEFINES += -DMD5
 md5deep: $(OBJ) $(MD5OBJ)
-	$(CC) $(OBJ) $(MD5OBJ) -o $@$(SUFFIX) $(LINK_OPT)
+	$(CC) $(CFLAGS) $(DEFINES) $(OBJ) $(MD5OBJ) -o $@$(SUFFIX) $(LINK_OPT)
 
 
 
 files-sha256.o: files.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 hash-sha256.o: hash.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 
 SHA256OBJ = files-sha256.o hash-sha256.o sha256.o
-sha256deep: CC += -DSHA256
+sha256deep: DEFINES += -DSHA256
 sha256deep: $(OBJ) $(SHA256OBJ)
-	$(CC) $(OBJ) $(SHA256OBJ) -o $@$(SUFFIX) $(LINK_OPT)
+	$(CC) $(CFLAGS) $(DEFINES) $(OBJ) $(SHA256OBJ) -o $@$(SUFFIX) $(LINK_OPT)
 
 
 
 files-sha1.o: files.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 hash-sha1.o: hash.c
-	$(CC) -c $< -o $@
+	$(CC) $(CFLAGS) $(DEFINES) -c $< -o $@
 SHA1OBJ = files-sha1.o hash-sha1.o sha1.o
-sha1deep: CC += -DSHA1
+sha1deep: DEFINES += -DSHA1
 sha1deep: $(OBJ) $(SHA1OBJ)
-	$(CC) $(OBJ) $(SHA1OBJ) -o $@$(SUFFIX) $(LINK_OPT)
+	$(CC) $(CFLAGS) $(DEFINES) $(OBJ) $(SHA1OBJ) -o $@$(SUFFIX) $(LINK_OPT)
 
 
 #---------------------------------------------------------------------
@@ -145,7 +149,7 @@
 #---------------------------------------------------------------------
 
 BIN = $(PREFIX)/bin
-MAN = $(PREFIX)/man/man1
+MAN = $(PREFIX)/share/man/man1
 
 install: goals
 	install -d $(BIN) $(MAN)
